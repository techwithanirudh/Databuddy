---
title: SDK Reference
description: Complete reference for the Databuddy SDK and JavaScript library
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { Callout } from 'fumadocs-ui/components/callout';
import { Card, Cards } from 'fumadocs-ui/components/card';
import { Accordion, Accordions } from 'fumadocs-ui/components/accordion';

# ğŸ“¦ SDK Reference

The Databuddy SDK provides both a React component and a standalone JavaScript library for tracking analytics events. This guide covers all configuration options, types, and usage patterns based on the actual implementation.

<Callout type="info">
**Version**: 1.0.2 | **API**: basket.databuddy.cc | **CDN**: app.databuddy.cc
</Callout>

## ğŸš€ Installation

<Tabs items={['React/Next.js', 'Script Tag']}>
<Tab value="React/Next.js">

```bash
# Using bun (recommended)
bun add @databuddy/sdk

# Using npm
npm install @databuddy/sdk

# Using yarn
yarn add @databuddy/sdk
```

</Tab>
<Tab value="Script Tag">

No installation needed - load directly from CDN:

```html
<script 
  src="https://app.databuddy.cc/databuddy.js"
  data-client-id="your-client-id"
  defer
></script>
```

</Tab>
</Tabs>

## âš¡ Quick Start

<Tabs items={['React Component', 'Script Tag']}>
<Tab value="React Component">

```tsx title="app/layout.tsx"
import { Databuddy } from '@databuddy/sdk';

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body>
        <Databuddy
          clientId={process.env.NEXT_PUBLIC_DATABUDDY_CLIENT_ID!}
          trackScreenViews
          trackPerformance
          trackWebVitals
        />
        {children}
      </body>
    </html>
  );
}
```

</Tab>
<Tab value="Script Tag">

```html title="index.html"
<!DOCTYPE html>
<html>
<head>
  <title>My Website</title>
</head>
<body>
  <!-- Your content -->
  
  <script 
    src="https://app.databuddy.cc/databuddy.js"
    data-client-id="your-client-id"
    data-track-screen-views="true"
    data-track-performance="true"
    data-track-web-vitals="true"
    defer
  ></script>
</body>
</html>
```

</Tab>
</Tabs>

## ğŸ”§ Configuration Options

### Required Settings

<Tabs items={['React Props', 'Script Attributes']}>
<Tab value="React Props">

```tsx
<Databuddy
  clientId="your-client-id"  // âœ… Required - Get from dashboard
/>
```

</Tab>
<Tab value="Script Attributes">

```html
<script 
  src="https://app.databuddy.cc/databuddy.js"
  data-client-id="your-client-id"  <!-- âœ… Required -->
></script>
```

</Tab>
</Tabs>

### Core Tracking Features

These features are **enabled by default** and recommended for most websites:

<Accordions>
<Accordion title="trackScreenViews (default: true)">

Tracks page views and route changes in SPAs.

<Tabs items={['React', 'Script Tag']}>
<Tab value="React">

```tsx
<Databuddy
  clientId="your-client-id"
  trackScreenViews={true}  // Default: true
/>
```

</Tab>
<Tab value="Script Tag">

```html
<script 
  data-track-screen-views="true"  <!-- Default: true -->
></script>
```

</Tab>
</Tabs>

**Events tracked**: `screen_view`, `page_view`

</Accordion>

<Accordion title="trackPerformance (default: true)">

Monitors page load times, navigation timing, and resource performance.

<Tabs items={['React', 'Script Tag']}>
<Tab value="React">

```tsx
<Databuddy
  clientId="your-client-id"
  trackPerformance={true}  // Default: true
/>
```

</Tab>
<Tab value="Script Tag">

```html
<script 
  data-track-performance="true"  <!-- Default: true -->
></script>
```

</Tab>
</Tabs>

**Events tracked**: `performance_navigation`, `performance_resource`

</Accordion>

<Accordion title="trackSessions (default: true)">

Tracks user sessions with a 30-minute timeout using sessionStorage.

<Tabs items={['React', 'Script Tag']}>
<Tab value="React">

```tsx
<Databuddy
  clientId="your-client-id"
  trackSessions={true}  // Default: true
/>
```

</Tab>
<Tab value="Script Tag">

```html
<script 
  data-track-sessions="true"  <!-- Default: true -->
></script>
```

</Tab>
</Tabs>

**Events tracked**: `session_start`, session duration metrics

</Accordion>
</Accordions>

### Optional Tracking Features

These features are **disabled by default** - enable as needed:

<Callout type="warn">
**Performance Impact**: Enabling many optional features can increase data volume and impact performance. Choose only what you need.
</Callout>

<Accordions>
<Accordion title="trackWebVitals (default: false)">

Tracks Core Web Vitals: LCP, FID, CLS, TTFB, INP.

```tsx
// âš ï¸ Can generate significant data volume
trackWebVitals={true}
```

**Events tracked**: `web_vitals` with metrics data

</Accordion>

<Accordion title="trackErrors (default: false)">

Captures JavaScript errors and unhandled promise rejections.

```tsx
trackErrors={true}
```

**Events tracked**: `javascript_error`, `unhandled_rejection`

</Accordion>

<Accordion title="trackOutgoingLinks (default: false)">

Tracks clicks on external links.

```tsx
trackOutgoingLinks={true}
```

**Events tracked**: `outgoing_link_click`

</Accordion>

<Accordion title="trackScrollDepth (default: false)">

Measures how far users scroll (25%, 50%, 75%, 100% milestones).

```tsx
trackScrollDepth={true}
```

**Events tracked**: `scroll_depth`

</Accordion>

<Accordion title="trackEngagement (default: false)">

Tracks time on page and user interactions.

```tsx
trackEngagement={true}
```

**Events tracked**: `engagement_time`, `page_engagement`

</Accordion>

<Accordion title="More Optional Features">

```tsx
// Advanced tracking options
trackExitIntent={false}      // Mouse leave detection
trackInteractions={false}    // Clicks, keypresses
trackBounceRate={false}      // Single-page visits
trackHashChanges={false}     // URL hash changes
trackAttributes={false}      // data-* attributes on clicks
```

</Accordion>
</Accordions>

### Performance & Reliability

<Tabs items={['React Props', 'Script Attributes']}>
<Tab value="React Props">

```tsx title="Performance Configuration"
<Databuddy
  clientId="your-client-id"
  
  // Batching (reduces requests)
  enableBatching={false}     // Default: false
  batchSize={10}             // Default: 10 (range: 1-50)
  batchTimeout={2000}        // Default: 2000ms (range: 100-30000)
  
  // Reliability
  enableRetries={true}       // Default: true
  maxRetries={3}             // Default: 3
  initialRetryDelay={500}    // Default: 500ms (range: 50-10000)
  
  // Sampling (for high-traffic sites)
  samplingRate={1.0}         // Default: 1.0 (range: 0.0-1.0)
  
  // Environment control
  disabled={process.env.NODE_ENV === 'development'}
/>
```

</Tab>
<Tab value="Script Attributes">

```html title="Performance Configuration"
<script 
  src="https://app.databuddy.cc/databuddy.js"
  data-client-id="your-client-id"
  
  <!-- Batching -->
  data-enable-batching="false"
  data-batch-size="10"
  data-batch-timeout="2000"
  
  <!-- Reliability -->
  data-enable-retries="true"
  data-max-retries="3"
  data-initial-retry-delay="500"
  
  <!-- Sampling -->
  data-sampling-rate="1.0"
  
  <!-- Environment -->
  data-disabled="false"
></script>
```

</Tab>
</Tabs>

<Callout type="info">
**Batching**: Groups multiple events into single requests. Enable for high-traffic sites to reduce server load.
</Callout>

### Advanced Configuration

<Accordions>
<Accordion title="Custom API Endpoints">

Only change these if you're self-hosting Databuddy:

```tsx
<Databuddy
  clientId="your-client-id"
  apiUrl="https://your-api.example.com"      // Default: basket.databuddy.cc
  scriptUrl="https://your-cdn.example.com"   // Default: app.databuddy.cc
/>
```

</Accordion>

<Accordion title="Event Filtering">

Filter events before they're sent:

```tsx
<Databuddy
  clientId="your-client-id"
  filter={(event) => {
    // Don't track admin pages
    if (event.properties?.page?.includes('/admin')) {
      return false;
    }
    
    // Don't track bot traffic
    if (navigator.userAgent.includes('bot')) {
      return false;
    }
    
    return true;
  }}
/>
```

</Accordion>

<Accordion title="TypeScript Interface">

Complete TypeScript definition:

```tsx
interface DatabuddyConfig {
  // Required
  clientId: string;

  // Optional authentication (server-side only)
  clientSecret?: string;

  // Endpoints
  apiUrl?: string;        // Default: 'https://basket.databuddy.cc'
  scriptUrl?: string;     // Default: 'https://app.databuddy.cc/databuddy.js'

  // SDK metadata
  sdk?: string;           // Default: 'web'
  sdkVersion?: string;    // Default: '1.0.2'

  // Control
  disabled?: boolean;     // Default: false

  // Core tracking (enabled by default)
  trackScreenViews?: boolean;    // Default: true
  trackPerformance?: boolean;    // Default: true  
  trackSessions?: boolean;       // Default: true

  // Optional tracking (disabled by default)
  trackWebVitals?: boolean;     // Default: false
  trackErrors?: boolean;        // Default: false
  trackOutgoingLinks?: boolean; // Default: false
  trackScrollDepth?: boolean;   // Default: false
  trackEngagement?: boolean;    // Default: false
  trackExitIntent?: boolean;    // Default: false
  trackInteractions?: boolean;  // Default: false
  trackBounceRate?: boolean;    // Default: false
  trackHashChanges?: boolean;   // Default: false
  trackAttributes?: boolean;    // Default: false

  // Performance & reliability
  samplingRate?: number;         // Default: 1.0 (0.0-1.0)
  enableRetries?: boolean;       // Default: true
  maxRetries?: number;          // Default: 3
  initialRetryDelay?: number;   // Default: 500ms (50-10000)
  enableBatching?: boolean;     // Default: false
  batchSize?: number;           // Default: 10 (1-50)
  batchTimeout?: number;        // Default: 2000ms (100-30000)

  // Custom filter function
  filter?: (event: any) => boolean;
}
```

</Accordion>
</Accordions>

## ğŸ¯ Custom Event Tracking

Track custom business events with detailed properties for comprehensive analytics:

<Tabs items={['React/Next.js', 'Script Tag']}>
<Tab value="React/Next.js">

```tsx title="Custom Events with Properties"
import { useEffect } from 'react';

function ProductPage({ product }: { product: Product }) {
  useEffect(() => {
    // Track product view with detailed properties
    window.databuddy?.track('product_viewed', {
      product_id: product.id,
      product_name: product.name,
      category: product.category,
      price: product.price,
      currency: 'USD',
      brand: product.brand,
      in_stock: product.availability > 0
    });
  }, [product]);

  const handlePurchase = () => {
    // Track conversion with purchase details
    window.databuddy?.track('purchase_completed', {
      product_id: product.id,
      revenue: product.price,
      currency: 'USD',
      payment_method: 'credit_card',
      shipping_method: 'standard',
      coupon_used: false
    });
  };

  const handleAddToCart = (quantity: number) => {
    // Track cart actions with context
    window.databuddy?.track('add_to_cart', {
      product_id: product.id,
      quantity: quantity,
      value: product.price * quantity,
      currency: 'USD',
      source: 'product_page'
    });
  };

  return (
    <div>
      <h1>{product.name}</h1>
      <button onClick={() => handleAddToCart(1)}>Add to Cart</button>
      <button onClick={handlePurchase}>Buy Now - ${product.price}</button>
    </div>
  );
}
```

**Alternative Object Syntax:**

```tsx
// Both syntaxes work identically
db.track('event_name', { key: 'value' });
window.databuddy?.track('event_name', { key: 'value' });
```

</Tab>
<Tab value="Script Tag">

```html title="Custom Events with Rich Properties"
<script>
// Track user actions with detailed context
function trackSignup(plan, source) {
  db.track('signup_completed', {
    plan: plan,
    source: source,
    trial_days: plan === 'pro' ? 14 : 7,
    referrer: document.referrer,
    utm_source: new URLSearchParams(window.location.search).get('utm_source')
  });
}

function trackFeatureUsage(feature, context) {
  db.track('feature_used', {
    feature: feature,
    page: window.location.pathname,
    user_tier: context.userTier,
    session_duration: context.sessionTime,
    previous_action: context.lastAction
  });
}

// Track complex interactions
function trackVideoEngagement(videoId, action, timestamp) {
  db.track('video_engagement', {
    video_id: videoId,
    action: action, // 'play', 'pause', 'complete', 'seek'
    timestamp: timestamp,
    duration: document.querySelector('#video').duration,
    quality: document.querySelector('#video').videoQuality,
    fullscreen: document.fullscreenElement !== null
  });
}

// Track form interactions with validation context
document.getElementById('contact-form').addEventListener('submit', (e) => {
  const formData = new FormData(e.target);
  db.track('contact_form_submitted', {
    form_id: 'contact-form',
    fields_completed: Array.from(formData.keys()).length,
    inquiry_type: formData.get('inquiry_type'),
    page: window.location.pathname,
    time_to_complete: Date.now() - window.formStartTime
  });
});
</script>

<button onclick="trackSignup('pro', 'pricing_page')">Upgrade to Pro</button>
<button onclick="trackFeatureUsage('export', {userTier: 'premium'})">Export Data</button>
```

</Tab>
</Tabs>

### Custom Event Best Practices

<Callout type="info">
**Event Naming**: Use snake_case for event names (e.g., `signup_completed`, `product_viewed`)
**Properties**: Include rich context for detailed analytics but avoid PII (personally identifiable information)
**Property Keys**: Use consistent naming across events for better analysis
</Callout>

<Cards>
  <Card title="Rich Property Tracking" icon="âœ…">
    ```tsx
    // âœ… Detailed properties for comprehensive analysis
    db.track('purchase_completed', {
      product_category: 'software',    // Groupable property
      payment_method: 'credit_card',   // Behavior analysis
      plan_type: 'annual',            // Business metric
      discount_applied: true,         // Conversion tracking
      value: 299.99,                 // Revenue tracking
      currency: 'USD',               // Standardization
      source: 'pricing_page'         // Attribution
    });
    
    // âœ… Consistent property names across events
    db.track('add_to_cart', {
      product_category: 'software',   // Same key as purchase
      value: 299.99,                // Same key format
      currency: 'USD',              // Consistent currency
      source: 'product_page'        // Consistent attribution
    });
    ```
  </Card>
  <Card title="Avoid These Patterns" icon="âŒ">
    ```tsx
    // âŒ Don't include PII
    db.track('signup', {
      email: 'user@example.com',     // PII violation
      phone: '+1234567890',         // PII violation
      ip_address: '192.168.1.1'     // PII violation
    });
    
    // âŒ Don't use inconsistent naming
    db.track('purchase', {
      productCat: 'software',        // camelCase instead of snake_case
      'payment method': 'card',      // spaces in keys
      Price: 299.99                 // inconsistent capitalization
    });
    
    // âŒ Don't use vague event names
    db.track('click');              // Too generic
    db.track('User Action');        // Spaces + vague
    ```
  </Card>
</Cards>

### ğŸ“Š Property Breakdown Analytics

Your custom event properties are automatically analyzed in the dashboard with:

<Tabs items={['Property Categories', 'Interactive Breakdowns']}>
<Tab value="Property Categories">

**Automatic Property Analysis:**
- ğŸ·ï¸ **Property keys** - All custom properties are extracted and categorized
- ğŸ“Š **Value distributions** - See how property values are distributed
- ğŸ¯ **Usage frequency** - Track which properties appear most often
- ğŸ“ˆ **Trend analysis** - Monitor how property values change over time

**Example Dashboard View:**
```
Event: purchase_completed (247 events)
â”œâ”€â”€ ğŸ“‚ product_category (247 values)
â”‚   â”œâ”€â”€ software: 156 (63%)
â”‚   â”œâ”€â”€ hardware: 78 (32%)
â”‚   â””â”€â”€ services: 13 (5%)
â”œâ”€â”€ ğŸ“‚ payment_method (247 values)  
â”‚   â”œâ”€â”€ credit_card: 198 (80%)
â”‚   â”œâ”€â”€ paypal: 35 (14%)
â”‚   â””â”€â”€ bank_transfer: 14 (6%)
â””â”€â”€ ğŸ“‚ plan_type (247 values)
    â”œâ”€â”€ annual: 186 (75%)
    â””â”€â”€ monthly: 61 (25%)
```

</Tab>
<Tab value="Interactive Breakdowns">

**Dashboard Features:**
- ğŸ” **Expandable categories** - Click to explore property breakdowns
- ğŸ“Š **Scrollable lists** - Handle large property value lists efficiently
- ğŸ¯ **Individual toggles** - Open/close each property category independently
- ğŸ“ˆ **Percentage calculations** - Automatic percentage distribution
- ğŸ”¢ **Value counts** - Total occurrences for each property value

**Visual Hierarchy:**
- **Event Level** - Overall event metrics and counts
- **Property Level** - Property categories with aggregate counts
- **Value Level** - Individual property values with percentages

</Tab>
</Tabs>

## ğŸ“‹ Configuration Reference

### Default Values Table

| Option | Default | Type | Range |
|--------|---------|------|-------|
| `clientId` | - | `string` | **Required** |
| `disabled` | `false` | `boolean` | - |
| `trackScreenViews` | `true` | `boolean` | - |
| `trackPerformance` | `true` | `boolean` | - |
| `trackSessions` | `true` | `boolean` | - |
| `trackWebVitals` | `false` | `boolean` | - |
| `trackErrors` | `false` | `boolean` | - |
| `trackOutgoingLinks` | `false` | `boolean` | - |
| `trackScrollDepth` | `false` | `boolean` | - |
| `trackEngagement` | `false` | `boolean` | - |
| `enableBatching` | `false` | `boolean` | - |
| `batchSize` | `10` | `number` | 1-50 |
| `batchTimeout` | `2000` | `number` | 100-30000ms |
| `samplingRate` | `1.0` | `number` | 0.0-1.0 |
| `enableRetries` | `true` | `boolean` | - |
| `maxRetries` | `3` | `number` | 0-10 |
| `initialRetryDelay` | `500` | `number` | 50-10000ms |
| `apiUrl` | `https://basket.databuddy.cc` | `string` | Valid URL |
| `scriptUrl` | `https://app.databuddy.cc/databuddy.js` | `string` | Valid URL |

### Environment Variables

For React/Next.js projects, set up environment variables:

```bash title=".env.local"
# Required
NEXT_PUBLIC_DATABUDDY_CLIENT_ID=your-client-id-here

# Optional - only for self-hosted instances
NEXT_PUBLIC_DATABUDDY_API_URL=https://your-api.example.com
```

<Callout type="warn">
**Security**: Never include `clientSecret` in client-side code. It's only for server-side usage.
</Callout>

## ğŸ” Debugging & Testing

### Development Mode

```tsx title="Disable tracking in development"
<Databuddy
  clientId={process.env.NEXT_PUBLIC_DATABUDDY_CLIENT_ID!}
  disabled={process.env.NODE_ENV === 'development'}
  // ... other props
/>
```

### Browser Console Testing

Test custom events in your browser console:

```javascript
// Test if SDK is loaded
console.log(window.databuddy ? 'SDK loaded âœ…' : 'SDK not loaded âŒ');

// Send test event
db.track('test_event', { source: 'console', timestamp: Date.now() });

// Check network requests
// Look for requests to basket.databuddy.cc in Network tab
```

### Common Issues

<Accordions>
<Accordion title="Events Not Appearing">

1. **Check Client ID**: Verify it matches your dashboard
2. **Check Network Tab**: Look for requests to `basket.databuddy.cc`
3. **Verify Domain**: Ensure your domain is verified in the dashboard
4. **Check Disabled State**: Make sure `disabled` is not `true`
5. **Test Manually**: Try `db.track('test', {})` in console

</Accordion>

<Accordion title="TypeScript Errors">

1. **Install SDK**: Make sure `@databuddy/sdk` is installed
2. **TypeScript Version**: Requires TypeScript 4.5+
3. **Global Types**: Add global declarations if needed:

```tsx
declare global {
  interface Window {
    databuddy?: {
      track: (event: string, properties?: Record<string, any>) => void;
    };
  }
}
```

</Accordion>

<Accordion title="Script Loading Issues">

1. **Check URL**: Verify `https://app.databuddy.cc/databuddy.js`
2. **Content Security Policy**: Add CSP rules if needed:
   ```
   script-src 'self' https://app.databuddy.cc;
   connect-src 'self' https://basket.databuddy.cc;
   ```
3. **Ad Blockers**: Some ad blockers may block analytics scripts

</Accordion>
</Accordions>

## ğŸ”— Related Documentation

<Cards>
  <Card title="Getting Started" href="/docs/getting-started" icon="ğŸš€">
    Quick setup guide and basic configuration
  </Card>
  <Card title="Integration Guides" href="/docs/Integrations" icon="âš™ï¸">
    Custom events, performance monitoring, and advanced features
  </Card>
  <Card title="Dashboard Guide" href="/docs/dashboard" icon="ğŸ“Š">
    Navigate your analytics dashboard and understand metrics
  </Card>
  <Card title="Security & Privacy" href="/docs/security" icon="ğŸ”’">
    Privacy settings, GDPR compliance, and data handling
  </Card>
</Cards>